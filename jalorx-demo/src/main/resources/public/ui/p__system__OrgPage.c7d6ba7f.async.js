(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"4iTi":function(e,t,r){"use strict";r.r(t);r("5NDa");var n=r("5rEg"),a=(r("DYRE"),r("zeV3")),o=(r("+L6B"),r("2/Rp")),l=r("VTBJ"),i=(r("miYZ"),r("tsqr")),c=r("1OyB"),u=r("vuIU"),f=r("Ji7U"),s=r("LK+K"),d=(r("ozfa"),r("MJZm")),m=r("wjNZ"),p=r("sy1d"),h=function(e){Object(f["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(c["a"])(this,r),e=t.call(this,"security/org"),e.getByName=function(e){return p["a"].get("/services/security/org/getByName?orgName=".concat(e))},e}return r}(m["a"]),b=h,y=r("Hx5s"),v=r("zbpD"),g=r.n(v),E=r("h+Id"),w=r("q1tI"),O=r.n(w),C=r("gYZU"),N=r.n(C),j=d["default"].TreeNode,S=function(e){Object(f["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;Object(c["a"])(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),e.form=O.a.createRef(),e.state={treeData:[],selectNode:{}},e.getTreeData=function(){(new b).readList().then((function(t){if(t.httpError)i["default"].error(t.message);else{var r={id:0,children:[]},n=t.data;if(n){for(var a=0;a<n.length;a+=1)n[a].pId||r.children&&r.children.push(n[a]);if(r&&r.children&&r.children.length)for(var o=0;o<r.children.length;o+=1)r.children[o].children=[],e.setTreeData(r.children[o],n);e.setState({treeData:r.children})}}}))},e.setTreeData=function(t,r){for(var n=0;n<r.length;n+=1)t.id===r[n].pId&&(t.children&&(r[n].children=[],t.children.push(r[n])),e.setTreeData(r[n],r))},e.onSubmit=function(t){(new b).getByName(t.orgName).then((function(r){var n=e.state.selectNode;r.httpError?i["default"].error(r.message):r?(new b).update(Object(l["a"])(Object(l["a"])({},n),t)).then((function(t){t.httpError?i["default"].error(t.message):(i["default"].success("\u66f4\u65b0\u6210\u529f"),e.getTreeData())})):(new b).add(Object(l["a"])({pId:n.id},t)).then((function(t){t.httpError?i["default"].error(t.message):(i["default"].success("\u65b0\u589e\u6210\u529f"),e.getTreeData())}))}))},e.renderTreeNodeItem=function(t){return t&&t.map((function(t){return O.a.createElement(j,{key:t.id,title:t.orgName},t.children&&e.renderTreeNodeItem(t.children))}))},e.onSelect=function(t){t&&t.length?(new b).read(t[0]).then((function(t){e.form.current&&(e.form.current.setFieldsValue(t),e.setState({selectNode:t}))})):e.setState({selectNode:{}})},e.delete=function(){var t=e.state.selectNode;t&&t.id?(new b).remove(t.id).then((function(t){t.httpError?i["default"].error(t.message):(i["default"].success("\u5220\u9664\u6210\u529f"),e.reset(),e.getTreeData())})):i["default"].info("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u7ec4\u7ec7\u673a\u6784")},e.reset=function(){e.form&&e.form.current&&e.form.current.resetFields()},e}return Object(u["a"])(r,[{key:"componentDidMount",value:function(){this.getTreeData()}},{key:"render",value:function(){var e=this,t=this.state.treeData;return O.a.createElement(y["a"],null,O.a.createElement("div",{className:N.a.content},O.a.createElement("div",{className:N.a.treeContent},O.a.createElement("div",{style:{marginBottom:20}},O.a.createElement(a["default"],null,O.a.createElement(o["default"],{type:"primary",onClick:this.reset},"\u65b0\u589e"),O.a.createElement(o["default"],{danger:!0,onClick:this.delete},"\u5220\u9664"))),O.a.createElement(d["default"],{onSelect:this.onSelect},t&&this.renderTreeNodeItem(t))),O.a.createElement("div",{className:N.a.formContent},O.a.createElement(g.a,{ref:this.form,onFinish:function(t){e.onSubmit(t)}},E["FormUtil"].renderFormItems([{label:"\u673a\u6784\u540d\u79f0",content:O.a.createElement(n["default"],null),name:"orgName",labelSpan:3,formItemProps:{children:"",rules:[{required:!0}]}},{label:"\u673a\u6784\u7b80\u79f0",content:O.a.createElement(n["default"],null),name:"filed1",labelSpan:3,formItemProps:{children:"",rules:[{required:!1}]}},{label:"\u673a\u6784\u7f16\u53f7",content:O.a.createElement(n["default"],null),name:"orgCode",labelSpan:3,formItemProps:{children:"",rules:[{required:!0}]}},{label:"\u5907\u6ce8",content:O.a.createElement(n["default"].TextArea,{rows:3}),name:"orgNote",labelSpan:3,formItemProps:{children:"",rules:[{required:!1}]}},{labelSpan:3,content:O.a.createElement("div",{className:"fb-ControlGroup"},O.a.createElement(a["default"],null,O.a.createElement(o["default"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),O.a.createElement(o["default"],{onClick:this.reset},"\u91cd\u7f6e")))}],1)))))}}]),r}(w["Component"]);t["default"]=S},gYZU:function(e,t,r){e.exports={content:"content___BSKvH",treeContent:"treeContent___wQyEz",formContent:"formContent___375kb"}},zbpD:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return i.List}}),Object.defineProperty(t,"useForm",{enumerable:!0,get:function(){return f.useForm}}),t["default"]=void 0;var a=p(r("q1tI")),o=d(r("BGR+")),l=d(r("TSYQ")),i=p(r("85Yc")),c=r("vgIT"),u=r("Gi/T"),f=r("FMpD"),s=p(r("fVhf"));function d(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r["default"]=e,t&&t.set(e,r),r}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function b(e,t){return w(e)||E(e,t)||v(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)if(r.push(l.value),t&&r.length===t)break}catch(c){a=!0,o=c}finally{try{n||null==i["return"]||i["return"]()}finally{if(a)throw o}}return r}}function w(e){if(Array.isArray(e))return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(e,t){var r,n=a.useContext(s["default"]),d=a.useContext(c.ConfigContext),m=d.getPrefixCls,p=d.direction,y=e.form,v=e.colon,g=e.name,E=e.labelAlign,w=e.labelCol,C=e.wrapperCol,N=e.prefixCls,j=e.hideRequiredMark,S=e.className,T=void 0===S?"":S,I=e.layout,D=void 0===I?"horizontal":I,F=e.size,_=void 0===F?n:F,P=e.scrollToFirstError,k=e.onFinishFailed,x=m("form",N),A=(0,l["default"])(x,(r={},O(r,"".concat(x,"-").concat(D),!0),O(r,"".concat(x,"-hide-required-mark"),j),O(r,"".concat(x,"-rtl"),"rtl"===p),O(r,"".concat(x,"-").concat(_),_),r),T),M=(0,o["default"])(e,["prefixCls","className","layout","hideRequiredMark","wrapperCol","labelAlign","labelCol","colon","scrollToFirstError"]),q=(0,f.useForm)(y),z=b(q,1),B=z[0];B.__INTERNAL__.name=g;var R=a.useMemo((function(){return{name:g,labelAlign:E,labelCol:w,wrapperCol:C,vertical:"vertical"===D,colon:v}}),[g,E,w,C,D,v]);a.useImperativeHandle(t,(function(){return B}));var L=function(e){k&&k(e),P&&e.errorFields.length&&B.scrollToField(e.errorFields[0].name)};return a.createElement(s.SizeContextProvider,{size:_},a.createElement(u.FormContext.Provider,{value:R},a.createElement(i["default"],h({id:g},M,{onFinishFailed:L,form:B,className:A}))))},N=a.forwardRef(C),j=N;t["default"]=j}}]);